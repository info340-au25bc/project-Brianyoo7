<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Select Collections</title>
  <link rel="stylesheet" href="./css/style.css">
</head>
<body>
  <nav>
    <img src="images/app-logo.jpg" alt="App Logo">
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="filter.html">Filter</a></li>
      <li aria-current="page"><a href="collection-selection.html">Collections</a></li>
    </ul>
  </nav>

  <header class="base-header-style">
    <h1>Save to Collections</h1>
    <p>Select one or more folders.</p>
  </header>

  <main class="main-feed">
    <h2>My Collections</h2>

    <p id="selected-count">0 selected</p>

    <form>

      <fieldset>
        <legend>Existing Collections</legend>
        <label><input type="checkbox" class="collection-check" value="Frontend Roadmap"> Frontend Roadmap</label><br>
        <label><input type="checkbox" class="collection-check" value="USA"> USA</label><br>
        <label><input type="checkbox" class="collection-check" value="Interview Prep"> Interview Prep</label>
      </fieldset>

      <fieldset>
        <legend>Create New</legend>
        <label for="newCollection">Name</label>
        <input id="newCollection" type="text" placeholder="Career Story Ideas">
        <button type="button" id="createBtn" class="collection-button">Create</button>
      </fieldset>

      <button type="submit" class="collection-button">Save</button>
      <a href="index.html" class="collection-button">Cancel</a>
    </form>

    <h3>Selected Collections</h3>
    <div id="preview-chips"></div>

  </main>

  <footer>
    <p class="author">Â© 2025 CareerPivot Team</p>
  </footer>

  <script>
    const checks = document.querySelectorAll(".collection-check");
    const count = document.getElementById("selected-count");
    const chips = document.getElementById("preview-chips");

    function update() {
      const selected = [...document.querySelectorAll(".collection-check:checked")];
      count.textContent = selected.length + " selected";
      chips.innerHTML = "";
      selected.forEach(cb => {
        const div = document.createElement("div");
        div.textContent = cb.value;
        chips.appendChild(div);
      });
    }

    checks.forEach(c => c.addEventListener("change", update));

    document.getElementById("createBtn").addEventListener("click", () => {
      const name = document.getElementById("newCollection").value.trim();
      if (!name) return;
      const label = document.createElement("label");
      label.innerHTML = `<input type="checkbox" class="collection-check" value="${name}"> ${name}`;
      document.querySelector("fieldset").appendChild(label);
      label.querySelector("input").addEventListener("change", update);
      document.getElementById("newCollection").value = "";
    });
  </script>
</body>
</html>
