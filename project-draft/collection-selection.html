<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Select Collections</title>
  <link rel="stylesheet" href="./css/style.css">
</head>
<body>
  <nav>
    <img src="images/app-logo.jpg" alt="App Logo">
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="filter.html">Filter</a></li>
      <li aria-current="page"><a href="collection-select.html">Collections</a></li>
    </ul>
  </nav>

  <header class="page-header">
    <h1>Save to Collections</h1>
    <p>Select collections or create a new one.</p>
  </header>

  <main>
    <section class="card">
      <h2>My Collections</h2>

      <p id="selected-count" class="muted">0 selected</p>

      <form class="collection-form">

        <fieldset>
          <legend>Existing Collections</legend>
          <ul class="collection-list">
            <li><label><input type="checkbox" class="collection-check" value="Frontend Roadmap"> Frontend Roadmap</label></li>
            <li><label><input type="checkbox" class="collection-check" value="USA"> USA</label></li>
            <li><label><input type="checkbox" class="collection-check" value="Interview Prep"> Interview Prep</label></li>
          </ul>
        </fieldset>

        <fieldset>
          <legend>Create New</legend>
          <label for="newCollection">Name</label>
          <input id="newCollection" type="text" placeholder="Career Change Stories">

          <button id="createBtn" type="button" class="btn secondary create-btn">Create</button>
        </fieldset>

        <div class="actions">
          <button type="submit" class="btn primary">Save</button>
          <a href="index.html" class="btn ghost">Cancel</a>
        </div>
      </form>

      <div id="preview-panel" class="preview-panel hidden">
        <h3>Selected Collections</h3>
        <div id="preview-chips" class="preview-chips"></div>
      </div>
    </section>
  </main>

  <footer>
    <p class="author">Â© 2025 CareerPivot Team</p>
  </footer>

  <script>
    const checkboxes = document.querySelectorAll(".collection-check");
    const countDisplay = document.getElementById("selected-count");
    const previewPanel = document.getElementById("preview-panel");
    const previewChips = document.getElementById("preview-chips");

    function updatePreview() {
      const selected = [...document.querySelectorAll(".collection-check:checked")];
      countDisplay.textContent = `${selected.length} selected`;
      previewChips.innerHTML = "";

      if (selected.length === 0) {
        previewPanel.classList.add("hidden");
        return;
      }
      previewPanel.classList.remove("hidden");

      selected.forEach(cb => {
        const chip = document.createElement("span");
        chip.className = "chip";
        chip.textContent = cb.value;
        previewChips.appendChild(chip);
      });
    }

    checkboxes.forEach(cb => cb.addEventListener("change", updatePreview));

    document.getElementById("createBtn").addEventListener("click", () => {
      const input = document.getElementById("newCollection");
      const name = input.value.trim();
      if (!name) return;

      const list = document.querySelector(".collection-list");
      const li
